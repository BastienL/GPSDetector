<!DOCTYPE HTML>
<html>
	<head>
		<meta charset="utf-8" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
		<title>GPS Detector</title>
		<script type="text/javascript" charset="utf-8" src="./cordova.js"></script>
		<script type="text/javascript" charset="utf-8" src="./js/gpsDetectionPlugin.js"></script>
	</head>
	<body>
		<h1>GPS Detector</h1>
		<input type="button" id="check" value="Check GPS state">
		<input type="button" id="openSettings" value="Open GPS settings">
	</body>
	
	<script type="text/javascript">
		document.addEventListener("deviceready", onDeviceReady, false);
		
		function onDeviceReady() {
		
			gpsDetect = cordova.require('cordova/plugin/gpsDetectionPlugin');
		
			var checkButton = document.getElementById("check");
			
			checkButton.onclick = function() {
				gpsDetect.checkGPS(onGPSSuccess, onGPSError);
			} 
			
			function onGPSSuccess(on) {
				if (on) alert("GPS is enabled");
				else alert("GPS is disabled");
			}
			
			function onGPSError(e) {
				alert("Error : "+e);
			}

			var openSettingsButton = document.getElementById("openSettings");

			openSettingsButton.onclick = function() {
				gpsDetect.switchToLocationSettings(onSwitchToLocationSettingsSuccess, onSwitchToLocationSettingsError);
			}

			function onSwitchToLocationSettingsSuccess() {

			}

			function onSwitchToLocationSettingsError(e) {
				alert("Error : "+e);
			}
		}
	</script>
</html>